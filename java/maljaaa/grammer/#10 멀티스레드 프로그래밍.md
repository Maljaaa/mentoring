# Thread 클래스와 Runnable 인터페이스
## Thread 클래스
* 구현

```
class exThread extends Thread{
  public void run(){
    ...
  }
}
```

* 테스트

```
void runThread(){
  Thread thread = new exThread();
  thread.start();
}
```

## Runnable 인터페이스
* 구현

```
public static exThread implements Runnable{
  @Override
  public void run(){
    ...
  }
}
```

* 테스트

```
void runThread(){
  Runaable runnable = new exThread();
  Thread thread = new Thread(runnable);
  thread.start();
}
```
> Runnable은 작업 내용을 가지고 있는 객체이지 실제 스레드가 아님
>
> Runnable을 매개 값으로 해서 Thread 생성자를 호출하면 비로소 스레드가 생성

# 스레드의 상태

## 스레드의 실행
![image](https://blog.kakaocdn.net/dn/byXJjY/btqYLykhIhI/3N62kRKo1xSVrkYCoPK6NK/img.png)

## 일시 정지
![image](https://blog.kakaocdn.net/dn/bqgyz7/btqYJ80tE6N/lnQAEBaWiBX4JR5xkkVOuK/img.png)

## 스레드 상태 확인
|상태|열거 상수|설명|
|--|--|--|
|객체 생성|NEW|스레드 객체가 생성, 아직 start() 메소드가 호출되지 않은 상태|
|실행 대기|RUNNABLE|실행 상태로 언제든지 갈 수 있는 상태|
|일시 정지|WAITING|다른 스레드가 통지할 때까지 기다리는 상태|
|일시 정지|TIMED_WAITING|주어진 시간 동안 기다리는 상태|
|일시 정지|BLOCKED|사용하고자 하는 객체의 락이 풀릴 때까지 기다리는 상태|
|종료|TERMINATED|싫행을 마친 상태|

## 스레드 상태 제어
![image](https://blog.kakaocdn.net/dn/bTh1zs/btqYKaRzxoM/l9xk9n85Fl8ydEdUapBeY1/img.png)

# 스레드의 우선순위

|필드|설명|
|--|--|
|static int MAX_PRIORITY|스레드가 가질 수 있는 최대 우선순위를 명시|
|static int MIN_PRIORITY|스레드가 가질 수 있는 최소 우선순위를 명시|
|static int NORM_PRIORITY|스레드가 생성될 때 가지는 기본 우선순위를 명시|

* getPriority(), setPriority() 메소드를 통해 스레드의 우선순위를 반환하거나 변경할 수 있음
* 우선순위 범위는 1 ~ 10
* 숫자가 높을수록 우선순위가 높음
* 우선순위가 높을 수록 좀 더 많이 실행 큐에 포함됌
* 스레드의 기본 우선순위는 5

# Main 쓰레드
* 모든 JAVA 애플리케이션은 메인 스레드가 main() 메소드를 실행하면서 시작
* main() 메소드의 첫 코드부터 아래로 순차적으로 실행
* main() 메소드의 마지막 코드를 실행하거나 return 문을 만나면 실행 종료
* 병렬로 코드를 실행할 수 있음 -> 멀티 스레드를 생성해 멀티 태스킹 수행 가능
* 싱슬 스레드 애플리케이션에서는 메인 스레드가 종료하면 프로세스가 종료됌
* 멀티 스레드 애플리케이션에서는 실행 중인 스레드가 하나라도 있다면 프로세스는 종료되지 않음

# 동기화
![image](https://blog.kakaocdn.net/dn/bbWqVw/btqYIkGNwdM/ZzNtkHZ5QpOleHYEK5Jbp1/img.png)

* 스레드가 사용 중인 객체를 다른 스레드가 변경할 수 없도록 -> 스레드 작업이 끝날 때까지 객체에 잠금을 걸어 다른 스레드가 사용할 수 없도록
* 임계 영역(Critical Section) : 멀티 스레드 프로그램에서 단 하나의 스레드만 실행할 수 있는 코드 영역
* Java에서 동기화 메소드와 동기화 블록 제공

[ synchronized 매소드 ]
```
public synchronized void method(){
  // 임계 영역, 단 한나의 스레드만 실행
}
```

[ synchronized 영역 ]
```
public void method(){
  // 공유객체 파라미터, 공유 객체가 자신이면 this 사용 가능
  synchronized(this){
    // 임계 영역, 단 하나의 스레드만 실행
  }
  // 그 외 여러 스레드 실행 가능
```

# 데드락
![image](https://blog.kakaocdn.net/dn/dnhQZw/btqYN2MhLyO/UuCElc1xSSd6O2VKtsIM00/img.png)

* 데드락(deadlock, 교착 상태) : 두 개 이상의 작업이 서로 상대방의 작업이 끝나기만을 기다리고 있는 상태
* 상호 배제, 점유 대기, 비선점, 순환 대기 4가지 조건 중 한 가지라도 만족하지 않으면  교착상태 발생하지 않음

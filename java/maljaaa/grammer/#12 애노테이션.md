# 애노테이션 정의하는 방법
```java
// Anotation
public @interface exAnnotation{
  String name();
  int age() default 0;
  color COLOR_ENUM() default color.RED;
}

// 사용 예
@exAnnotation(name = "custom")
public class annotationExecute{
}
```

[ 특징 ]
* 각 엘리먼트는 타입과 이름으로 구성되며, 디폴트 값을 가질 수 있음
* 엘리먼트 타입으로는 primitibe type, String, Enum, Class Type, 이들의 배열 타입 사용 가능
* 디폴트 값이 없는 값은 반드시 값을 명시, 디폴트 값이 있는 값은 생략 가능

# @Retention
* 사용 용도에 따라 애노테이션의 유지 범위를 지정해야 할 경우 사용
* 3가지 범위
  * 소스 범위에서 유지
  * 컴파일 클래스까지 유지
  * 런타임까지 유지
* java.lang.annotation.RetentionPolicy 열거 상수로 정의되어 있음

|RetentionPolicy|설명|
|--|--|
|SOURCE|소스상에서만 애노테이션 정보 유지<br>소스코드를 분석할 때만 의미가 있으며, 컴파일된 바이트 코드파일에는 정보가 남지 않음|
|CLASS|바이트 코드 파일까지 애노테이션 정보를 유지<br>하지만 리플렉션을 이용해서 애노테이션 정보를 얻을 수 없음|
|RUNTIME|바이트 코드 파일까지 애노테이션 정보를 유지<br>리플렉션을 이용해서 런타임 시에 애노테이션 정보를 얻을 수 있음|
> 리플렉션(Reflection)이란 **런타임** 시에 클래스 메타 정보를 얻는 기능
>
> 해당 기능을 사용해 애노테이션 정보를 얻기 위해서는 Retention leve = RUNTIME이어야 함

```java
// Runtime 범위까지 사용 가능하게 지정
@Retention(RetentionPolicy.RUNTIME)
public @interface customeAnnotation {
  String name();
  int age() default 0;
  color COLOR_ENUM() default color.RED;
}
```

# @Target
* 애노테이션 적용 대상을 지정할 때 사용하는 애노테이션
* 적용 대상은 java.lang.annotation.ElementType 열거 상수로 정의되어 있음
* 기본 앨리먼트 value는 복수 개를 지정할 수 있게 ElementType 배열을 값으로 가짐

|ElementType 열거 상수|적용 대상|
|--|--|
|TYPE|클래스, 인터페이스, 열거 타입|
|ANNOTATION|애노테이션|
|FIELD|필드|
|CONSTRUCTOR|생성자|
|METHOD|메소드|
|LOCAL_VARIABLE|로컬변수|
|PACKAGE|패키지|

[ 적용 ]
* 클래스에 적용한 애노테이션을 필드에만 적용이 가능하도록 @Target 지정 시 컴파일 에러 발생
  * '@customAnnotation' not applicable to type'
```java
@Target(ElementType.FIELD)  // 필드만 사용 가능하게 지정
public @interface customAnnotation {
  String name();
  int age() default 0;
  color COLOR_ENUM() default color.RED;
}
```

# @Documented
* 애노테이션에 대한 정보가 javadoc으로 작성한 문서에 포함되도록 함
* 표준 애노테이션 중 @Override, @SuppressWarnings를 제외하고 모두 @Documented 애노테이션이 붙어 있음

[ 정의 ]
```java
@Documented
public @interface javaDocAnnotation {
  String author();
  String date();
  int version();
}
```

[ 사용 ]
```java
@javaDocAnnotation(author = "wony", date = "2022.10.10", version = 1)
public class javadocCreate {
}
```

# 애노테이션 프로세서
* 일반적으로 애노테이션에 대한 코드 베이스를 검사, 수정 또는 생성하는 데 사용
* Java 컴파일러의 플러그인 일종
* 개발자의 코드 단순화
* Javac의 일부이므로 모든 처리가 런타임보다는 컴파일 시간에 발생하기 때문에 빠름
* 리플렉션(런타임에 많은 예외)을 사용하지 않음
* 보일러 플레이트 코드를 생성해줌
* 대표적으로 lombok
* 자바 컴파일러가 컴파일 수행 -> 실행되지 않은 애노테이션 프로세서들을 수행 -> 프로세서 내부에서 애노테이션이 달린 Element들에 대한 처리 -> 컴파일러가 모든 애노테이션 프로세서가 실행되었는지 확인하고, 그렇지 않다면 반복해서 작업 수행

![image](https://user-images.githubusercontent.com/61977260/194842161-ecb200e3-4c38-4464-ae35-5d511640d41c.png)


# 1. 스트림 사용법
## 스트림
* 스트림(Stream) : 컬렉션에 저장되어 있는 엘리먼트들을 하나씩 순회하면서 처리할 수 있는 코드 패턴
## 스트림 API의 동작 흐름
![image](https://user-images.githubusercontent.com/61977260/195592471-99449713-96d8-4bc1-956d-2f273609de1e.png)

1. 스트림의 생성
2. 스트림의 중개 연산(스트림의 변환)
3. 스트림의 최종 연산(스트림의 사용)

## 스트림의 생성
### 컬렉션
```java
ArrayList<Integer> list = new ArrayList<Integer>();

list.add(4);
list.add(2);
list.add(3);
list.add(1);

// 컬렉션에서 스트림 생성
Stream<Integer> stream = list.stream();
// forEach() 메소드를 이용한 스트림 요소의 순차 접근
stream.forEach(System.out::prinln);
```
> 4 2 3 1

* Stream 클래스의 forEach() 메소드는 해당 스트림의 요소를 하나씩 소모해가며 순차적으로 요소에 접근
* 따라서 forEach() 메소드를 한 번밖에 호출할 수 없음

### 배열
```java
String[] arr = new String[]{"넷", "둘", "셋", "하나"};

// 배열에서 스트림 생성
Stream<String> stream1 = Arrays.stream(arr);
stream1.forEach(e -> System.out.print(e + " "));
System.out.println();

// 배열의 특정 부분만을 이용한 스트림 생성
Stream<String> stream2 = Arrays.stream(arr, 1, 3);
stream2.forEach(e -> System.out.print(e + " "));
```
> 넷 둘 셋 하나
>
> 둘 셋

### 가변 매개변수
```java
// 가변 매개변수에서 스트림 생성
Stream<Double> stream = Stream.of(4.2, 2.5, 3.1, 1.9);
stream.forEach(System.out::println);
```
> 4.2 2.5 3.1 1.9

### 지정된 범위의 연속된 정수
```java
/ 지정된 범위의 연속된 정수에서 스트림 생성
IntStream stream1 = IntStream.range(1, 4);
stream1.forEach(e -> System.out.print(e + " "));
System.out.println();

IntStream stream2 = IntStream.rangeClosed(1, 4);
stream2.forEach(e -> System.out.print(e + " "));
```
> 1 2 3
>
> 1 2 3 4(시작, 끝까지)

### 특정 타입의 난수들
```java
// 특정 타입의 난수로 이루어진 스트림 생성
IntStream stream = new Random().ints(4);
stream.forEach(System.out::println);
```
> 1072176871
>
> -649065206
>
> 133298431
>
> -616174137

### 람다 표현식
* iterate() : 시드로 명시된 값을 람다 표현식에 사용하여 반환된 값을 다시 시드로 사용하는 방식 -> 무한 스트림 생성
* generate() : 매개변수가 없는 람다 표현식을 사용하여 변환된 값 -> 스트림을 생성
```java
IntStream stream = Stream.iterate(2, n -> n + 2); // 2, 4, 6, 8, 10, ...
```

### 파일
* lines() 메소드를 사용하면 파일뿐만 아니라 다른 입력으로부터도 데이터를 행(line) 단위로 읽어 올 수 있음
```java
String<String> stream = Files.lines(Path path);
```
### 빈 스트림
* empty()로 구현
```java
// 빈 스트림 생성
Stream<Object> stream = Stream.empty();
System.out.println(stream.count()); // 스트림의 요소의 총 개수를 출력함.
```
> 0

## 스트림 중개 연산
### 스트림 필터링 : filter(), distinct()
```java
IntStream stream1 = IntStream.of(7, 5, 5, 2, 1, 2, 3, 5, 4, 6);
IntStream stream2 = IntStream.of(7, 5, 5, 2, 1, 2, 3, 5, 4, 6);

// 스트림에서 중복된 요소를 제거함.
stream1.distinct().forEach(e -> System.out.print(e + " "));
System.out.println();

// 스트림에서 홀수만을 골라냄.
stream2.filter(n -> n % 2 != 0).forEach(e -> System.out.print(e + " "));
```
> 7 5 2 1 2 3 5 4 6
>
> 7 5 5 1 3 5

### 스트림 변환 : map(), flatMap()
```java
Stream<String> stream = Stream.of("HTML", "CSS", "JAVA", "JAVASCRIPT");
stream.map(s -> s.length()).forEach(System.out::println);
```
> 4 3 4 10

```java
String[] arr = {"I study hard", "You study JAVA", "I am hungry"};

Stream<String> stream = Arrays.stream(arr);
stream.flatMap(s -> Stream.of(s.split(" +"))).forEach(System.out::println);
```
> I study hard You study JAVA I am hungry

### 스트림 제한 : limit(), skip()
```java
IntStream stream1 = IntStream.range(0, 10);
IntStream stream2 = IntStream.range(0, 10);
IntStream stream3 = IntStream.range(0, 10);

stream1.skip(4).forEach(n -> System.out.print(n + " "));
System.out.println();

stream2.limit(5).forEach(n -> System.out.print(n + " "));
System.out.println();

stream3.skip(3).limit(5).forEach(n -> System.out.print(n + " "));
```
> 4 5 6 7 8 9
>
> 0 1 2 3 4
>
> 3 4 5 6 7 

### 스트림 정렬 : sorted()
```java
Stream<String> stream1 = Stream.of("JAVA", "HTML", "JAVASCRIPT", "CSS");
Stream<String> stream2 = Stream.of("JAVA", "HTML", "JAVASCRIPT", "CSS");

stream1.sorted().forEach(s -> System.out.print(s + " "));
System.out.println();

stream2.sorted(Comparator.reverseOrder()).forEach(s -> System.out.print(s + " "));
```
> CSS HTML JAVA JAVASCRIPT 
>
> JAVASCRIPT JAVA HTML CSS 

### 스트림 연산 결과 확인 : peek()
```java
IntStream stream = IntStream.of(7, 5, 5, 2, 1, 2, 3, 5, 4, 6);

stream.peek(s -> System.out.println("원본 스트림 : " + s))
    .skip(2)
    .peek(s -> System.out.println("skip(2) 실행 후 : " + s))
    .limit(5)
    .peek(s -> System.out.println("limit(5) 실행 후 : " + s))
    .sorted()
    .peek(s -> System.out.println("sorted() 실행 후 : " + s))
    .forEach(n -> System.out.println(n));
```
> 원본 스트림 : 7
>
> 원본 스트림 : 5
>
> 원본 스트림 : 5
> 
> skip(2) 실행 후 : 5
>
> limit(5) 실행 후 : 5
>
> 원본 스트림 : 2
>
> skip(2) 실행 후 : 2
>
> limit(5) 실행 후 : 2
>
> 원본 스트림 : 1
>
> skip(2) 실행 후 : 1
>
> limit(5) 실행 후 : 1
>
> 원본 스트림 : 2
> 
> skip(2) 실행 후 : 2
>
> limit(5) 실행 후 : 2
>
> 원본 스트림 : 3
>
> skip(2) 실행 후 : 3
>
> limit(5) 실행 후 : 3
>
> sorted() 실행 후 : 1
>
> 1
>
> sorted() 실행 후 : 2
>
> 2
>
> sorted() 실행 후 : 2
>
> 2
>
> sorted() 실행 후 : 3
>
> 3
>
> sorted() 실행 후 : 5
> 
> 5

## 스트림의 최종 연산
### 요소의 출력 : forEach()
```java
Stream<String> stream = Stream.of("넷", "둘", "셋", "하나");
stream.forEach(System.out::println);
```
> 넷 둘 셋 하나
### 요소의 소모 : reduce() 
```java
Stream<String> stream1 = Stream.of("넷", "둘", "셋", "하나");
Stream<String> stream2 = Stream.of("넷", "둘", "셋", "하나");

Optional<String> result1 = stream1.reduce((s1, s2) -> s1 + "++" + s2);
result1.ifPresent(System.out::println);

String result2 = stream2.reduce("시작", (s1, s2) -> s1 + "++" + s2);
System.out.println(result2);
```
> 넷++둘++셋++하나
>
> 시작++넷++둘++셋++하나

### 요소의 검색 : findFirst(), findAny()
```java
IntStream stream1 = IntStream.of(4, 2, 7, 3, 5, 1, 6);
IntStream stream2 = IntStream.of(4, 2, 7, 3, 5, 1, 6);

OptionalInt result1 = stream1.sorted().findFirst();
System.out.println(result1.getAsInt());

OptionalInt result2 = stream2.sorted().findAny();
System.out.println(result2.getAsInt());
```
> 1
> 1

### 요소의 검사 : anyMatch(), allMatch(), noneMatch()
```java
IntStream stream1 = IntStream.of(30, 90, 70, 10);
IntStream stream2 = IntStream.of(30, 90, 70, 10);

System.out.println(stream1.anyMatch(n -> n > 80));
System.out.println(stream2.allMatch(n -> n > 80));
```
> true
> false

### 요소의 통계 : count(), min(), max
```java
IntStream stream1 = IntStream.of(30, 90, 70, 10);
IntStream stream2 = IntStream.of(30, 90, 70, 10);

System.out.println(stream1.count());
System.out.println(stream2.max().getAsInt());
```
> 4
>
> 90

### 요소의 연산 : sum(), average()
```java
IntStream stream1 = IntStream.of(30, 90, 70, 10);
DoubleStream stream2 = DoubleStream.of(30.3, 90.9, 70.7, 10.1);

System.out.println(stream1.sum());
System.out.println(stream2.average().getAsDouble());
```
> 200
>
> 50.5

### 요소의 수집 : collect()
```java
Stream<String> stream = Stream.of("넷", "둘", "하나", "셋");

List<String> list = stream.collect(Collectors.toList());
Iterator<String> iter = list.iterator();
while(iter.hasNext()) {
    System.out.print(iter.next() + " ");
}
```
> 넷 둘 하나 셋

# 2. 스트림 병렬 처리 및 주의사항

# 3. Stream VS forLoop

# 4. 문제 (추후 제시)

# 운영체제(OS)
## 프로세스(Process)
### 1. 프로그램 vs 프로세스
|프로그램|프로세스|
|:---:|:---:|
|저장장치에 저장되어 있는 정적인 상태|실행을 위해 메모리에 올라온 동적인 상태|
|"짠다", "작성한다"|"실행한다"|
|프로그램 + 프로세스 제어 블록|프로세스 - 프로세스 제어 블록|

> 프로그램 : 컴퓨터에서 실행될 때 특정 작업을 수행하는 일련의 명령어들의 모음(집합)<br>
> 프로세스 : 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램<br>
> 프로세스 제어 블록 : 특정한 프로세스를 관리할 필요가 있는 정보를 포함하는 운영체제 커널의 자료구조<br>
> 커널 : 운영체제의 주요 구성 요소이며 컴퓨터 하드웨어와 프로세스를 잇는 핵심 인터페이스

### 2. 프로세스 활성 상태(Active Status)

<ul><li>생성 상태</li></ul>

```
생성 상태(Create Status)는 프로그램이 메모리에 올라오고 운영체제로부터 프로세스 제어블록을 할당받은 상태이다. 
생성된 프로세스는 바로 실행되는 것이 아니라 준비 상태에서 자기 순서를 기다리며, 프로세스 제어 블록도 같이 준비 상태로 옮겨진다.
```

<ul><li>준비 상태</li></ul>

```
준비 상태(Ready Status)는 실행 대기 중인 모든 프로세스가 자기 순서를 기다리는 상태이다. 
프로세스 제어 블록은 준비 큐(Ready Queue)에서 기다리며 CPU 스케줄러에 의해 관리된다. 
CPU 스케줄러는 준비 상태에서 큐를 몇 개 운영할지, 큐에 있는 어떤 프로세스의 프로세스 제어 블록을 실행 상태로 보낼지를 결정한다.
실제로는 다수의 준비 큐가 운영된다.
```

<ul><li>실행 상태</li></ul>

```
실행 상태(Running Status)는 프로세스가 CPU를 할당받아 실행되는 상태이다.
준비 상태에 있는 많은 프로세스 중 실행 상태에 들어가는 프로세스는 CPU의 개수 만큼이다.
실행 상태에 있는 프로세스는 자신에게 주어진 시간, 즉 타임 슬라이스 동안만 작업할 수 있다.
그 시간을 다 사용하면 timeout(PID)가 실행된다.
timeout(PID)는 프로세스 제어 블록을 실행 상태에서 준비 상태로 옮긴다.
만약 실행 상태 동안 작업이 완료되면 exit(PID)가 실행되어 프로세스가 정상 종료된다.
실행 상태에 있는 프로세스가 입출력을 요청하면 CPU는 입출력 관리자에게 입출력을 요청하고 block(PID)를 실행한다.
block(PID)는 입출력이 완료될 때까지 작업을 진행할 수 없기 때무에 해당 프로세스를 대기 상태로 옮긴다.
CPU 스케줄러는 새로운 프로세스를 실행 상태로 가져온다(dispatch)
```

<ul><li>대기 상태</li></ul>

```
대기 상태(Blocking Status)는 실행 상태에 있는 프로세스가 입출력을 요청하면 입출력이 완료될 때까지 기다리는 상태로 'wait status'라고도 한다.
대기 상태는 작업의 효율을 위해 만들어진 것으로, 대기 상태의 프로세스는 입출력장치별로 마련된 큐에서 기다린다.
입출력이 완료되면 인터럽트가 발생하고, 대기 상태에 있는 여러 프로세스 중 해당 인터럽트로 깨어날 프로세스를 찾는데 이것이 wakeup(PID)이다.
wakeup(PID)로 해당 프로세스의 프로세스 제어 블록이 준비 상태로 이동하게 된다.
어떤 프로세스가 대기 상태에서 준비 상태로 이동하는 것은 인터럽트 때문이다.
인터럽트는 입출력으로 발생하지만 어떤 이벤트에 의해 발생하기도 한다.
```

<ul><li>완료 상태</li></ul>

```
완료 상태(Terminate Status)는 프로세스가 종료되는 상태이다.
완료 상태에서는 코드와 사용했던 데이터를 메모리에서 삭제하고 프로세스 제어 블록을 폐기한다.
정상적인 종료는 간단히 exit()로 처리한다.
만약 오류나 다른 프로세스에 의해 비정상적으로 종료되는 강제종료(abort)를 만나면 디버깅하기 위해 강제 종료 직전의 메모리 상태를 저장장치로 옮기는데,
이를 코어 덤프(core dump)라고 한다.
코어 덤프는 종료 직전의 메모리 상태를 확인함으로써 오류를 수정할 수 있게 해준다.
```

### 3. 프로세스 휴식 상태와 보류 
<ul><li>휴식 상태</li></ul>

```
휴식 상태(Pause Status)는 프로세스가 작업을 일시적으로 쉬고 있는 상태이다.
```

<ul><li>보류 상태</li></ul>

```
보류 상태(Suspend Status)는 프로세스가 메모리에서 잠시 쫓겨난 상태로 휴식 상태와 차이가 있다.
보류 상태는 '일시 정지 상태'라고도 불리며, 보류 상태와 비교하여 일반적인 프로세스 상태를 활성 상태라고 한다.
보류 상태에 들어간 프로세스는 메모리 밖으로 쫓겨나 스왑 영역(swap area)에 보관된다.
스왑 영역은 메모리에서 쫓겨난 데이터가 임시로 보간되는 곳이다.
보류 상태와 휴식 상태를 구분하자면, 보류 상태는 스왑 영역에 있는 상태에고 휴식 상태는 프로세스가 메모리에 있으나 멈춘 상태이다.
```

### 4. 프로세스의 다섯 가지 상태 정리
<picture>
  <img alt="process 5state" src="https://blog.kakaocdn.net/dn/bf4d6d/btq1NuS4831/dbvf4a9ah1kXaLugrMhrNK/img.png">
</picture>

|상태|설명|작업|
|:---:|:---:|:---:|
|생성 상태|<ul><li>프로그램을 메모리에 가져와 실행 준비가 완료된 상태</li></ul>|메모리 할당, 프로세스 제어 블록 생성|
|준비 상태|<ul><li>실행을 기다리는 모든 프로세스가 자기 차례를 기다리는 상태</li></ul><ul><li>실행될 프로세스를 CPU 스케줄러가 선택</li></ul>|dispatch(PID) : 준비 -> 실행|
|실행 상태|<ul><li>선택된 프로세스가 타임 슬라이스를 얻어 CPU를 사용하는 상태</li></ul><ul><li>프로세스 사이의 문맥 교환이 일어남</li></ul>|timeout(PID) : 실행 -> 준비<br>exit(PID) : 실행 -> 완료<br>block(PID) : 실행 -> 대기|
|대기 상태|<ul><li>실행 상태에 있는 프로세스가 입출력을 요청하면 입출력이 완료될 때까지 기다리는 상태</li></ul><ul><li>입출력이 완료되면 준비 상태로 감</li></ul>|wakeup(PID) : 대기 -> 준비|
|완료 상태|<ul><li>프로세스가 종료된 상태</li></ul><ul><li>사용하던 모든 데이터가 정리됨</li></ul><ul><li>정상 종료인 exit와 비정상 종료인 abort를 포함</li></ul>|메모리삭제, 프로세스 제어 블록 삭제|
